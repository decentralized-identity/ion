import"/js/modules/dom.js";var Router=globalThis.Router=Object.assign({initialized:!1,last:{__state__:!0,href:location.href,origin:location.origin,path:null,search:"",params:{}},filters:[],generateState:t=>({__state__:!0,href:t.href,origin:t.origin,path:t.pathname,search:t.search,params:Object.fromEntries(new URLSearchParams(t.search))}),modifyState(t={}){let e=new URL(location.href);if(e.pathname=t.path||location.pathname,t.params){let a=new URLSearchParams(e.search);for(let e in t.params)a.set(e,t.params[e]);e.search=a.toString()}Router.setState(e,t.event||null)},setState(t,e){let a;t.__state__||(t=Router.generateState(t));let r=Router.last;Router.filters.forEach(e=>{let o=e.path&&e.path===t.path,s=o&&e.path!==r.path,i=!!e.params&&e.params.some(e=>r.params[e]!==t.params[e]);console.log(e.path,t.path,r.path),o&&(a=location.origin===t.origin,a&&(s||i)&&e.listener&&e.listener(t,r))}),console.log(a),a&&(e&&"popstate"!==e.type&&e.preventDefault(),Router.initialized?t.href!==r.href&&e&&"popstate"!==e.type&&history.pushState(t,"ION"+(t.title?" - "+t.title:""),t.search):history.replaceState(t,"ION"+(t.title?" - "+t.title:""),t.search),document.documentElement.setAttribute("route",t.path+t.search),Router.last=t,dispatchEvent(new Event("routechange",{detail:{current:t,previous:r}}))),Router.initialized=!0}},globalThis.Router||{});globalThis.onpopstate=function(t){Router.setState(t.state)},DOM.delegateEvent("click","a[href]",(function(t,e){Router.setState(e,t)}));export{Router};
import"/js/modules/dom.js";class DetailBox extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.addEventListener("pointerup",t=>{t.target.hasAttribute("detail-box-toggle")&&(t.stopPropagation(),this.toggle())}),this.addEventListener("transitionend",t=>{let e=t.target;e.parentElement===this&&"SECTION"===e.tagName&&"height"===t.propertyName&&(e.style.height=this.hasAttribute("open")?"auto":null)})}open(){this.setAttribute("open","")}close(){this.removeAttribute("open")}toggle(){this.toggleAttribute("open")}attributeChangedCallback(t,e,i){switch(t){case"open":DOM.ready.then(t=>{for(let t of this.children)if("SECTION"===t.tagName){if(null!==i)t.offsetHeight<t.scrollHeight&&(t.style.height=t.scrollHeight+"px",DOM.fireEvent(this,"detailboxtoggle",{detail:{open:!0}}));else if(t.offsetHeight>0){t.style.height=t.offsetHeight+"px";this.scrollHeight;t.style.height=0,DOM.fireEvent(this,"detailboxtoggle",{detail:{open:!1}})}break}})}}}customElements.define("detail-box",DetailBox);export{DetailBox};
import"/js/modules/dom.js";class ModalOverlay extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.addEventListener("pointerup",e=>{(e.target===this||e.target.hasAttribute("modal-close"))&&this.close()}),this.addEventListener("transitionend",e=>{e.target===this&&"opacity"===e.propertyName&&DOM.fireEvent(this,this.isOpen?"modalopened":"modalclosed")})}get isOpen(){return this.hasAttribute("open")}open(){this.setAttribute("open","")}close(){this.removeAttribute("open")}attributeChangedCallback(e,t,s){switch(e){case"open":DOM.ready.then(e=>{DOM.fireEvent(this,null!==s?"modalopen":"modalclose")})}}}customElements.define("modal-overlay",ModalOverlay);export{ModalOverlay};
import"/js/modules/dom.js";class NoticeBar extends HTMLElement{static get observedAttributes(){return["open"]}constructor(t={}){super(),this.options=t,this.addEventListener("transitionend",t=>{if(t.target===this&&"transform"===t.propertyName){let t="show"===this.getAttribute("notice-state");t?this.setAttribute("notice-state","hide"):!this.options.retain&&this.parentElement&&this.parentElement.removeChild(this),DOM.fireEvent(this,t?"noticeshow":"noticehide")}}),this.addEventListener("pointerenter",t=>this.setAttribute("notice-interaction",""))}render(t){this.setAttribute("notice-type",t.type||"default"),this.innerHTML=`<header>${t.title||""}</header>\n                      <section>${t.body||""}</section>\n                      <footer>${t.footer||""}</footer>`,(t.container||document.body||document.documentElement).appendChild(this)}notify(t){this.options=t||this.options,this.render(this.options),DOM.skipAnimationFrame(()=>this.setAttribute("notice-state","show"))}}customElements.define("notice-bar",NoticeBar);export{NoticeBar};
import"/js/modules/dom.js";class SlidePanels extends HTMLElement{static get observedAttributes(){return["open"]}constructor(){super(),this.addEventListener("pointerup",e=>{e.target===this&&this.close()}),this.addEventListener("transitionend",e=>{e.target.parentElement===this&&"opacity"===e.propertyName&&DOM.fireEvent(this,this.id===this.active?"panelopened":"panelclosed")})}get active(){return this.getAttribute("open")}toggle(e){this.active===e?this.close():this.open(e)}open(e){this.setAttribute("open",e)}close(){this.removeAttribute("open")}attributeChangedCallback(e,t,i){switch(e){case"open":for(let e of this.children)e.id===i?(DOM.fireEvent(e,"panelopen"),e.setAttribute("open","")):e.hasAttribute("open")&&(DOM.fireEvent(e,"panelclose"),e.removeAttribute("open",""))}}}customElements.define("slide-panels",SlidePanels);export{SlidePanels};
import"/js/modules/dom.js";class TabPanels extends HTMLElement{constructor(){super(),DOM.delegateEvent("click","tab-panels > nav > *",(e,t)=>{let s=t.parentElement;s.parentElement===this&&this.setAttribute("selected-index",Array.prototype.indexOf.call(s.children,t))},{container:this,passive:!0})}static get observedAttributes(){return["selected-index"]}attributeChangedCallback(e,t,s){DOM.ready.then(()=>{switch(e){case"selected-index":let e=s||0,t=this.querySelector("nav");if(t.parentElement===this){let s=t.children,l=s[e];for(let e of s)e.removeAttribute("selected");l&&l.setAttribute("selected","");let r=Array.prototype.filter.call(this.children,e=>{if("SECTION"===e.tagName)return e.removeAttribute("selected"),!0})[e];r&&r.setAttribute("selected","")}}})}}customElements.define("tab-panels",TabPanels);export{TabPanels};